function FastClick(e){var n,t=this;if(this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.lastTouchIdentifier=this.touchStartY=this.touchStartX=0,this.touchBoundary=10,this.layer=e,!e||!e.nodeType)throw new TypeError("Layer must be a document node");this.onClick=function(){return FastClick.prototype.onClick.apply(t,arguments)},this.onMouse=function(){return FastClick.prototype.onMouse.apply(t,arguments)},this.onTouchStart=function(){return FastClick.prototype.onTouchStart.apply(t,arguments)},this.onTouchMove=function(){return FastClick.prototype.onTouchMove.apply(t,arguments)},this.onTouchEnd=function(){return FastClick.prototype.onTouchEnd.apply(t,arguments)},this.onTouchCancel=function(){return FastClick.prototype.onTouchCancel.apply(t,arguments)},FastClick.notNeeded(e)||(this.deviceIsAndroid&&(e.addEventListener("mouseover",this.onMouse,!0),e.addEventListener("mousedown",this.onMouse,!0),e.addEventListener("mouseup",this.onMouse,!0)),e.addEventListener("click",this.onClick,!0),e.addEventListener("touchstart",this.onTouchStart,!1),e.addEventListener("touchmove",this.onTouchMove,!1),e.addEventListener("touchend",this.onTouchEnd,!1),e.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(e.removeEventListener=function(n,t,o){var a=Node.prototype.removeEventListener;"click"===n?a.call(e,n,t.hijacked||t,o):a.call(e,n,t,o)},e.addEventListener=function(n,t,o){var a=Node.prototype.addEventListener;"click"===n?a.call(e,n,t.hijacked||(t.hijacked=function(e){e.propagationStopped||t(e)}),o):a.call(e,n,t,o)}),"function"!=typeof e.onclick)||(n=e.onclick,e.addEventListener("click",function(e){n(e)},!1),e.onclick=null)}var Zepto=function(){function e(e){return null==e?String(e):V[U.call(e)]||"object"}function n(n){return"function"==e(n)}function t(e){return null!=e&&e==e.window}function o(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function a(n){return"object"==e(n)}function i(e){return a(e)&&!t(e)&&Object.getPrototypeOf(e)==Object.prototype}function s(e){return"number"==typeof e.length}function r(e){return I.call(e,function(e){return null!=e})}function l(e){return e.length>0?C.fn.concat.apply([],e):e}function d(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function c(e){return e in E?E[e]:E[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function u(e,n){return"number"!=typeof n||M[d(e)]?n:n+"px"}function f(e){var n,t;return A[e]||(n=B.createElement(e),B.body.appendChild(n),t=getComputedStyle(n,"").getPropertyValue("display"),n.parentNode.removeChild(n),"none"==t&&(t="block"),A[e]=t),A[e]}function p(e){return"children"in e?T.call(e.children):C.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function h(e,n,t){for($ in n)t&&(i(n[$])||z(n[$]))?(i(n[$])&&!i(e[$])&&(e[$]={}),z(n[$])&&!z(e[$])&&(e[$]=[]),h(e[$],n[$],t)):n[$]!==k&&(e[$]=n[$])}function w(e,n){return null==n?C(e):C(e).filter(n)}function g(e,t,o,a){return n(t)?t.call(e,o,a):t}function m(e,n,t){null==t?e.removeAttribute(n):e.setAttribute(n,t)}function v(e,n){var t=e.className||"",o=t&&t.baseVal!==k;return n===k?o?t.baseVal:t:void(o?t.baseVal=n:e.className=n)}function y(e){try{return e?"true"==e||("false"==e?!1:"null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?C.parseJSON(e):e):e}catch(n){return e}}function _(e,n){n(e);for(var t=0,o=e.childNodes.length;o>t;t++)_(e.childNodes[t],n)}var k,$,C,b,S,D,x=[],T=x.slice,I=x.filter,B=window.document,A={},E={},M={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},q=/^\s*<(\w+|!)[^>]*>/,N=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,O=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,P=/^(?:body|html)$/i,L=/([A-Z])/g,R=["val","css","html","text","data","width","height","offset"],H=["after","prepend","before","append"],j=B.createElement("table"),F=B.createElement("tr"),W={tr:B.createElement("tbody"),tbody:j,thead:j,tfoot:j,td:F,th:F,"*":B.createElement("div")},J=/complete|loaded|interactive/,Y=/^[\w-]*$/,V={},U=V.toString,K={},Q=B.createElement("div"),Z={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},z=Array.isArray||function(e){return e instanceof Array};return K.matches=function(e,n){if(!n||!e||1!==e.nodeType)return!1;var t=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(t)return t.call(e,n);var o,a=e.parentNode,i=!a;return i&&(a=Q).appendChild(e),o=~K.qsa(a,n).indexOf(e),i&&Q.removeChild(e),o},S=function(e){return e.replace(/-+(.)?/g,function(e,n){return n?n.toUpperCase():""})},D=function(e){return I.call(e,function(n,t){return e.indexOf(n)==t})},K.fragment=function(e,n,t){var o,a,s;return N.test(e)&&(o=C(B.createElement(RegExp.$1))),o||(e.replace&&(e=e.replace(O,"<$1></$2>")),n===k&&(n=q.test(e)&&RegExp.$1),n in W||(n="*"),s=W[n],s.innerHTML=""+e,o=C.each(T.call(s.childNodes),function(){s.removeChild(this)})),i(t)&&(a=C(o),C.each(t,function(e,n){R.indexOf(e)>-1?a[e](n):a.attr(e,n)})),o},K.Z=function(e,n){return e=e||[],e.__proto__=C.fn,e.selector=n||"",e},K.isZ=function(e){return e instanceof K.Z},K.init=function(e,t){var o;if(!e)return K.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&q.test(e))o=K.fragment(e,RegExp.$1,t),e=null;else{if(t!==k)return C(t).find(e);o=K.qsa(B,e)}else{if(n(e))return C(B).ready(e);if(K.isZ(e))return e;if(z(e))o=r(e);else if(a(e))o=[e],e=null;else if(q.test(e))o=K.fragment(e.trim(),RegExp.$1,t),e=null;else{if(t!==k)return C(t).find(e);o=K.qsa(B,e)}}return K.Z(o,e)},C=function(e,n){return K.init(e,n)},C.extend=function(e){var n,t=T.call(arguments,1);return"boolean"==typeof e&&(n=e,e=t.shift()),t.forEach(function(t){h(e,t,n)}),e},K.qsa=function(e,n){var t,a="#"==n[0],i=!a&&"."==n[0],s=a||i?n.slice(1):n,r=Y.test(s);return o(e)&&r&&a?(t=e.getElementById(s))?[t]:[]:1!==e.nodeType&&9!==e.nodeType?[]:T.call(r&&!a?i?e.getElementsByClassName(s):e.getElementsByTagName(n):e.querySelectorAll(n))},C.contains=B.documentElement.contains?function(e,n){return e!==n&&e.contains(n)}:function(e,n){for(;n&&(n=n.parentNode);)if(n===e)return!0;return!1},C.type=e,C.isFunction=n,C.isWindow=t,C.isArray=z,C.isPlainObject=i,C.isEmptyObject=function(e){var n;for(n in e)return!1;return!0},C.inArray=function(e,n,t){return x.indexOf.call(n,e,t)},C.camelCase=S,C.trim=function(e){return null==e?"":String.prototype.trim.call(e)},C.uuid=0,C.support={},C.expr={},C.map=function(e,n){var t,o,a,i=[];if(s(e))for(o=0;o<e.length;o++)t=n(e[o],o),null!=t&&i.push(t);else for(a in e)t=n(e[a],a),null!=t&&i.push(t);return l(i)},C.each=function(e,n){var t,o;if(s(e)){for(t=0;t<e.length;t++)if(n.call(e[t],t,e[t])===!1)return e}else for(o in e)if(n.call(e[o],o,e[o])===!1)return e;return e},C.grep=function(e,n){return I.call(e,n)},window.JSON&&(C.parseJSON=JSON.parse),C.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,n){V["[object "+n+"]"]=n.toLowerCase()}),C.fn={forEach:x.forEach,reduce:x.reduce,push:x.push,sort:x.sort,indexOf:x.indexOf,concat:x.concat,map:function(e){return C(C.map(this,function(n,t){return e.call(n,t,n)}))},slice:function(){return C(T.apply(this,arguments))},ready:function(e){return J.test(B.readyState)&&B.body?e(C):B.addEventListener("DOMContentLoaded",function(){e(C)},!1),this},get:function(e){return e===k?T.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){return x.every.call(this,function(n,t){return e.call(n,t,n)!==!1}),this},filter:function(e){return n(e)?this.not(this.not(e)):C(I.call(this,function(n){return K.matches(n,e)}))},add:function(e,n){return C(D(this.concat(C(e,n))))},is:function(e){return this.length>0&&K.matches(this[0],e)},not:function(e){var t=[];if(n(e)&&e.call!==k)this.each(function(n){e.call(this,n)||t.push(this)});else{var o="string"==typeof e?this.filter(e):s(e)&&n(e.item)?T.call(e):C(e);this.forEach(function(e){o.indexOf(e)<0&&t.push(e)})}return C(t)},has:function(e){return this.filter(function(){return a(e)?C.contains(this,e):C(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!a(e)?e:C(e)},last:function(){var e=this[this.length-1];return e&&!a(e)?e:C(e)},find:function(e){var n,t=this;return n=e?"object"==typeof e?C(e).filter(function(){var e=this;return x.some.call(t,function(n){return C.contains(n,e)})}):1==this.length?C(K.qsa(this[0],e)):this.map(function(){return K.qsa(this,e)}):C()},closest:function(e,n){var t=this[0],a=!1;for("object"==typeof e&&(a=C(e));t&&!(a?a.indexOf(t)>=0:K.matches(t,e));)t=t!==n&&!o(t)&&t.parentNode;return C(t)},parents:function(e){for(var n=[],t=this;t.length>0;)t=C.map(t,function(e){return(e=e.parentNode)&&!o(e)&&n.indexOf(e)<0?(n.push(e),e):void 0});return w(n,e)},parent:function(e){return w(D(this.pluck("parentNode")),e)},children:function(e){return w(this.map(function(){return p(this)}),e)},contents:function(){return this.map(function(){return T.call(this.childNodes)})},siblings:function(e){return w(this.map(function(e,n){return I.call(p(n.parentNode),function(e){return e!==n})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return C.map(this,function(n){return n[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=f(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var t=n(e);if(this[0]&&!t)var o=C(e).get(0),a=o.parentNode||this.length>1;return this.each(function(n){C(this).wrapAll(t?e.call(this,n):a?o.cloneNode(!0):o)})},wrapAll:function(e){if(this[0]){C(this[0]).before(e=C(e));for(var n;(n=e.children()).length;)e=n.first();C(e).append(this)}return this},wrapInner:function(e){var t=n(e);return this.each(function(n){var o=C(this),a=o.contents(),i=t?e.call(this,n):e;a.length?a.wrapAll(i):o.append(i)})},unwrap:function(){return this.parent().each(function(){C(this).replaceWith(C(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var n=C(this);(e===k?"none"==n.css("display"):e)?n.show():n.hide()})},prev:function(e){return C(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return C(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(n){var t=this.innerHTML;C(this).empty().append(g(this,e,n,t))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(n){var t=g(this,e,n,this.textContent);this.textContent=null==t?"":""+t}):0 in this?this[0].textContent:null},attr:function(e,n){var t;return"string"!=typeof e||1 in arguments?this.each(function(t){if(1===this.nodeType)if(a(e))for($ in e)m(this,$,e[$]);else m(this,e,g(this,n,t,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(t=this[0].getAttribute(e))&&e in this[0]?this[0][e]:t:k},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){m(this,e)},this)})},prop:function(e,n){return e=Z[e]||e,1 in arguments?this.each(function(t){this[e]=g(this,n,t,this[e])}):this[0]&&this[0][e]},data:function(e,n){var t="data-"+e.replace(L,"-$1").toLowerCase(),o=1 in arguments?this.attr(t,n):this.attr(t);return null!==o?y(o):k},val:function(e){return 0 in arguments?this.each(function(n){this.value=g(this,e,n,this.value)}):this[0]&&(this[0].multiple?C(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(n){var t=C(this),o=g(this,e,n,t.offset()),a=t.offsetParent().offset(),i={top:o.top-a.top,left:o.left-a.left};"static"==t.css("position")&&(i.position="relative"),t.css(i)});if(!this.length)return null;var n=this[0].getBoundingClientRect();return{left:n.left+window.pageXOffset,top:n.top+window.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(n,t){if(arguments.length<2){var o,a=this[0];if(!a)return;if(o=getComputedStyle(a,""),"string"==typeof n)return a.style[S(n)]||o.getPropertyValue(n);if(z(n)){var i={};return C.each(n,function(e,n){i[n]=a.style[S(n)]||o.getPropertyValue(n)}),i}}var s="";if("string"==e(n))t||0===t?s=d(n)+":"+u(n,t):this.each(function(){this.style.removeProperty(d(n))});else for($ in n)n[$]||0===n[$]?s+=d($)+":"+u($,n[$])+";":this.each(function(){this.style.removeProperty(d($))});return this.each(function(){this.style.cssText+=";"+s})},index:function(e){return e?this.indexOf(C(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return e?x.some.call(this,function(e){return this.test(v(e))},c(e)):!1},addClass:function(e){return e?this.each(function(n){if("className"in this){b=[];var t=v(this),o=g(this,e,n,t);o.split(/\s+/g).forEach(function(e){C(this).hasClass(e)||b.push(e)},this),b.length&&v(this,t+(t?" ":"")+b.join(" "))}}):this},removeClass:function(e){return this.each(function(n){if("className"in this){if(e===k)return v(this,"");b=v(this),g(this,e,n,b).split(/\s+/g).forEach(function(e){b=b.replace(c(e)," ")}),v(this,b.trim())}})},toggleClass:function(e,n){return e?this.each(function(t){var o=C(this),a=g(this,e,t,v(this));a.split(/\s+/g).forEach(function(e){(n===k?!o.hasClass(e):n)?o.addClass(e):o.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var n="scrollTop"in this[0];return e===k?n?this[0].scrollTop:this[0].pageYOffset:this.each(n?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var n="scrollLeft"in this[0];return e===k?n?this[0].scrollLeft:this[0].pageXOffset:this.each(n?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],n=this.offsetParent(),t=this.offset(),o=P.test(n[0].nodeName)?{top:0,left:0}:n.offset();return t.top-=parseFloat(C(e).css("margin-top"))||0,t.left-=parseFloat(C(e).css("margin-left"))||0,o.top+=parseFloat(C(n[0]).css("border-top-width"))||0,o.left+=parseFloat(C(n[0]).css("border-left-width"))||0,{top:t.top-o.top,left:t.left-o.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||B.body;e&&!P.test(e.nodeName)&&"static"==C(e).css("position");)e=e.offsetParent;return e})}},C.fn.detach=C.fn.remove,["width","height"].forEach(function(e){var n=e.replace(/./,function(e){return e[0].toUpperCase()});C.fn[e]=function(a){var i,s=this[0];return a===k?t(s)?s["inner"+n]:o(s)?s.documentElement["scroll"+n]:(i=this.offset())&&i[e]:this.each(function(n){s=C(this),s.css(e,g(this,a,n,s[e]()))})}}),H.forEach(function(n,t){var o=t%2;C.fn[n]=function(){var n,a,i=C.map(arguments,function(t){return n=e(t),"object"==n||"array"==n||null==t?t:K.fragment(t)}),s=this.length>1;return i.length<1?this:this.each(function(e,n){a=o?n:n.parentNode,n=0==t?n.nextSibling:1==t?n.firstChild:2==t?n:null;var r=C.contains(B.documentElement,a);i.forEach(function(e){if(s)e=e.cloneNode(!0);else if(!a)return C(e).remove();a.insertBefore(e,n),r&&_(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},C.fn[o?n+"To":"insert"+(t?"Before":"After")]=function(e){return C(e)[n](this),this}}),K.Z.prototype=C.fn,K.uniq=D,K.deserializeValue=y,C.zepto=K,C}();window.Zepto=Zepto,void 0===window.$&&(window.$=Zepto),function(e){function n(e){return e._zid||(e._zid=f++)}function t(e,t,i,s){if(t=o(t),t.ns)var r=a(t.ns);return(g[n(e)]||[]).filter(function(e){return!(!e||t.e&&e.e!=t.e||t.ns&&!r.test(e.ns)||i&&n(e.fn)!==n(i)||s&&e.sel!=s)})}function o(e){var n=(""+e).split(".");return{e:n[0],ns:n.slice(1).sort().join(" ")}}function a(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function i(e,n){return e.del&&!v&&e.e in y||!!n}function s(e){return _[e]||v&&y[e]||e}function r(t,a,r,l,c,f,p){var h=n(t),w=g[h]||(g[h]=[]);a.split(/\s/).forEach(function(n){if("ready"==n)return e(document).ready(r);var a=o(n);a.fn=r,a.sel=c,a.e in _&&(r=function(n){var t=n.relatedTarget;return!t||t!==this&&!e.contains(this,t)?a.fn.apply(this,arguments):void 0}),a.del=f;var h=f||r;a.proxy=function(e){if(e=d(e),!e.isImmediatePropagationStopped()){e.data=l;var n=h.apply(t,e._args==u?[e]:[e].concat(e._args));return n===!1&&(e.preventDefault(),e.stopPropagation()),n}},a.i=w.length,w.push(a),"addEventListener"in t&&t.addEventListener(s(a.e),a.proxy,i(a,p))})}function l(e,o,a,r,l){var d=n(e);(o||"").split(/\s/).forEach(function(n){t(e,n,a,r).forEach(function(n){delete g[d][n.i],"removeEventListener"in e&&e.removeEventListener(s(n.e),n.proxy,i(n,l))})})}function d(n,t){return(t||!n.isDefaultPrevented)&&(t||(t=n),e.each(b,function(e,o){var a=t[e];n[e]=function(){return this[o]=k,a&&a.apply(t,arguments)},n[o]=$}),(t.defaultPrevented!==u?t.defaultPrevented:"returnValue"in t?t.returnValue===!1:t.getPreventDefault&&t.getPreventDefault())&&(n.isDefaultPrevented=k)),n}function c(e){var n,t={originalEvent:e};for(n in e)C.test(n)||e[n]===u||(t[n]=e[n]);return d(t,e)}var u,f=1,p=Array.prototype.slice,h=e.isFunction,w=function(e){return"string"==typeof e},g={},m={},v="onfocusin"in window,y={focus:"focusin",blur:"focusout"},_={mouseenter:"mouseover",mouseleave:"mouseout"};m.click=m.mousedown=m.mouseup=m.mousemove="MouseEvents",e.event={add:r,remove:l},e.proxy=function(t,o){var a=2 in arguments&&p.call(arguments,2);if(h(t)){var i=function(){return t.apply(o,a?a.concat(p.call(arguments)):arguments)};return i._zid=n(t),i}if(w(o))return a?(a.unshift(t[o],t),e.proxy.apply(null,a)):e.proxy(t[o],t);throw new TypeError("expected function")},e.fn.bind=function(e,n,t){return this.on(e,n,t)},e.fn.unbind=function(e,n){return this.off(e,n)},e.fn.one=function(e,n,t,o){return this.on(e,n,t,o,1)};var k=function(){return!0},$=function(){return!1},C=/^([A-Z]|returnValue$|layer[XY]$)/,b={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,n,t){return this.on(n,e,t)},e.fn.undelegate=function(e,n,t){return this.off(n,e,t)},e.fn.live=function(n,t){return e(document.body).delegate(this.selector,n,t),this},e.fn.die=function(n,t){return e(document.body).undelegate(this.selector,n,t),this},e.fn.on=function(n,t,o,a,i){var s,d,f=this;return n&&!w(n)?(e.each(n,function(e,n){f.on(e,t,o,n,i)}),f):(w(t)||h(a)||a===!1||(a=o,o=t,t=u),(h(o)||o===!1)&&(a=o,o=u),a===!1&&(a=$),f.each(function(u,f){i&&(s=function(e){return l(f,e.type,a),a.apply(this,arguments)}),t&&(d=function(n){var o,i=e(n.target).closest(t,f).get(0);return i&&i!==f?(o=e.extend(c(n),{currentTarget:i,liveFired:f}),(s||a).apply(i,[o].concat(p.call(arguments,1)))):void 0}),r(f,n,a,o,t,d||s)}))},e.fn.off=function(n,t,o){var a=this;return n&&!w(n)?(e.each(n,function(e,n){a.off(e,t,n)}),a):(w(t)||h(o)||o===!1||(o=t,t=u),o===!1&&(o=$),a.each(function(){l(this,n,o,t)}))},e.fn.trigger=function(n,t){return n=w(n)||e.isPlainObject(n)?e.Event(n):d(n),n._args=t,this.each(function(){n.type in y&&"function"==typeof this[n.type]?this[n.type]():"dispatchEvent"in this?this.dispatchEvent(n):e(this).triggerHandler(n,t)})},e.fn.triggerHandler=function(n,o){var a,i;return this.each(function(s,r){a=c(w(n)?e.Event(n):n),a._args=o,a.target=r,e.each(t(r,n.type||n),function(e,n){return i=n.proxy(a),a.isImmediatePropagationStopped()?!1:void 0})}),i},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(n){e.fn[n]=function(e){return 0 in arguments?this.bind(n,e):this.trigger(n)}}),e.Event=function(e,n){w(e)||(n=e,e=n.type);var t=document.createEvent(m[e]||"Events"),o=!0;if(n)for(var a in n)"bubbles"==a?o=!!n[a]:t[a]=n[a];return t.initEvent(e,o,!0),d(t)}}(Zepto),function(e){function n(n,t,o){var a=e.Event(t);return e(n).trigger(a,o),!a.isDefaultPrevented()}function t(e,t,o,a){return e.global?n(t||v,o,a):void 0}function o(n){n.global&&0===e.active++&&t(n,null,"ajaxStart")}function a(n){n.global&&!--e.active&&t(n,null,"ajaxStop")}function i(e,n){var o=n.context;return n.beforeSend.call(o,e,n)===!1||t(n,o,"ajaxBeforeSend",[e,n])===!1?!1:void t(n,o,"ajaxSend",[e,n])}function s(e,n,o,a){var i=o.context,s="success";o.success.call(i,e,s,n),a&&a.resolveWith(i,[e,s,n]),t(o,i,"ajaxSuccess",[n,o,e]),l(s,n,o)}function r(e,n,o,a,i){var s=a.context;a.error.call(s,o,n,e),i&&i.rejectWith(s,[o,n,e]),t(a,s,"ajaxError",[o,a,e||n]),l(n,o,a)}function l(e,n,o){var i=o.context;o.complete.call(i,n,e),t(o,i,"ajaxComplete",[n,o]),a(o)}function d(){}function c(e){return e&&(e=e.split(";",2)[0]),e&&(e==C?"html":e==$?"json":_.test(e)?"script":k.test(e)&&"xml")||"text"}function u(e,n){return""==n?e:(e+"&"+n).replace(/[&?]{1,2}/,"?")}function f(n){n.processData&&n.data&&"string"!=e.type(n.data)&&(n.data=e.param(n.data,n.traditional)),!n.data||n.type&&"GET"!=n.type.toUpperCase()||(n.url=u(n.url,n.data),n.data=void 0)}function p(n,t,o,a){return e.isFunction(t)&&(a=o,o=t,t=void 0),e.isFunction(o)||(a=o,o=void 0),{url:n,data:t,success:o,dataType:a}}function h(n,t,o,a){var i,s=e.isArray(t),r=e.isPlainObject(t);e.each(t,function(t,l){i=e.type(l),a&&(t=o?a:a+"["+(r||"object"==i||"array"==i?t:"")+"]"),!a&&s?n.add(l.name,l.value):"array"==i||!o&&"object"==i?h(n,l,o,t):n.add(t,l)})}var w,g,m=0,v=window.document,y=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,_=/^(?:text|application)\/javascript/i,k=/^(?:text|application)\/xml/i,$="application/json",C="text/html",b=/^\s*$/,S=v.createElement("a");S.href=window.location.href,e.active=0,e.ajaxJSONP=function(n,t){if(!("type"in n))return e.ajax(n);var o,a,l=n.jsonpCallback,d=(e.isFunction(l)?l():l)||"jsonp"+ ++m,c=v.createElement("script"),u=window[d],f=function(n){e(c).triggerHandler("error",n||"abort")},p={abort:f};return t&&t.promise(p),e(c).on("load error",function(i,l){clearTimeout(a),e(c).off().remove(),"error"!=i.type&&o?s(o[0],p,n,t):r(null,l||"error",p,n,t),window[d]=u,o&&e.isFunction(u)&&u(o[0]),u=o=void 0}),i(p,n)===!1?(f("abort"),p):(window[d]=function(){o=arguments},c.src=n.url.replace(/\?(.+)=\?/,"?$1="+d),v.head.appendChild(c),n.timeout>0&&(a=setTimeout(function(){f("timeout")},n.timeout)),p)},e.ajaxSettings={type:"GET",beforeSend:d,success:d,error:d,complete:d,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:$,xml:"application/xml, text/xml",html:C,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(n){var t,a=e.extend({},n||{}),l=e.Deferred&&e.Deferred();for(w in e.ajaxSettings)void 0===a[w]&&(a[w]=e.ajaxSettings[w]);o(a),a.crossDomain||(t=v.createElement("a"),t.href=a.url,t.href=t.href,a.crossDomain=S.protocol+"//"+S.host!=t.protocol+"//"+t.host),a.url||(a.url=window.location.toString()),f(a);var p=a.dataType,h=/\?.+=\?/.test(a.url);if(h&&(p="jsonp"),a.cache!==!1&&(n&&n.cache===!0||"script"!=p&&"jsonp"!=p)||(a.url=u(a.url,"_="+Date.now())),"jsonp"==p)return h||(a.url=u(a.url,a.jsonp?a.jsonp+"=?":a.jsonp===!1?"":"callback=?")),e.ajaxJSONP(a,l);var m,y=a.accepts[p],_={},k=function(e,n){_[e.toLowerCase()]=[e,n]},$=/^([\w-]+:)\/\//.test(a.url)?RegExp.$1:window.location.protocol,C=a.xhr(),D=C.setRequestHeader;if(l&&l.promise(C),a.crossDomain||k("X-Requested-With","XMLHttpRequest"),k("Accept",y||"*/*"),(y=a.mimeType||y)&&(y.indexOf(",")>-1&&(y=y.split(",",2)[0]),C.overrideMimeType&&C.overrideMimeType(y)),(a.contentType||a.contentType!==!1&&a.data&&"GET"!=a.type.toUpperCase())&&k("Content-Type",a.contentType||"application/x-www-form-urlencoded"),a.headers)for(g in a.headers)k(g,a.headers[g]);if(C.setRequestHeader=k,C.onreadystatechange=function(){if(4==C.readyState){C.onreadystatechange=d,clearTimeout(m);var n,t=!1;if(C.status>=200&&C.status<300||304==C.status||0==C.status&&"file:"==$){p=p||c(a.mimeType||C.getResponseHeader("content-type")),n=C.responseText;try{"script"==p?(1,eval)(n):"xml"==p?n=C.responseXML:"json"==p&&(n=b.test(n)?null:e.parseJSON(n))}catch(o){t=o}t?r(t,"parsererror",C,a,l):s(n,C,a,l)}else r(C.statusText||null,C.status?"error":"abort",C,a,l)}},i(C,a)===!1)return C.abort(),r(null,"abort",C,a,l),C;if(a.xhrFields)for(g in a.xhrFields)C[g]=a.xhrFields[g];var x="async"in a?a.async:!0;C.open(a.type,a.url,x,a.username,a.password);for(g in _)D.apply(C,_[g]);return a.timeout>0&&(m=setTimeout(function(){C.onreadystatechange=d,C.abort(),r(null,"timeout",C,a,l)},a.timeout)),C.send(a.data?a.data:null),C},e.get=function(){return e.ajax(p.apply(null,arguments))},e.post=function(){var n=p.apply(null,arguments);return n.type="POST",e.ajax(n)},e.getJSON=function(){var n=p.apply(null,arguments);return n.dataType="json",e.ajax(n)},e.fn.load=function(n,t,o){if(!this.length)return this;var a,i=this,s=n.split(/\s/),r=p(n,t,o),l=r.success;return s.length>1&&(r.url=s[0],a=s[1]),r.success=function(n){i.html(a?e("<div>").html(n.replace(y,"")).find(a):n),l&&l.apply(i,arguments)},e.ajax(r),this};var D=encodeURIComponent;e.param=function(n,t){var o=[];return o.add=function(n,t){e.isFunction(t)&&(t=t()),null==t&&(t=""),this.push(D(n)+"="+D(t))},h(o,n,t),o.join("&").replace(/%20/g,"+")}}(Zepto),function(e){e.fn.serializeArray=function(){var n,t,o=[],a=function(e){return e.forEach?e.forEach(a):void o.push({name:n,value:e})};return this[0]&&e.each(this[0].elements,function(o,i){t=i.type,n=i.name,n&&"fieldset"!=i.nodeName.toLowerCase()&&!i.disabled&&"submit"!=t&&"reset"!=t&&"button"!=t&&"file"!=t&&("radio"!=t&&"checkbox"!=t||i.checked)&&a(e(i).val())}),o},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(n){e.push(encodeURIComponent(n.name)+"="+encodeURIComponent(n.value))}),e.join("&")},e.fn.submit=function(n){if(0 in arguments)this.bind("submit",n);else if(this.length){var t=e.Event("submit");this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()}return this}}(Zepto),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(n,t){return n=n||[],e.extend(n,e.fn),n.selector=t||"",n.__Z=!0,n},isZ:function(n){return"array"===e.type(n)&&"__Z"in n}});try{getComputedStyle(void 0)}catch(n){var t=getComputedStyle;window.getComputedStyle=function(e){try{return t(e)}catch(n){return null}}}}(Zepto),function(e){function n(e){this.app=function(){var e,n=navigator.userAgent,t=!1,o=!1,a=!1,i="";return(e=n.match(/MicroMessenger\/([\d\.]*)/i))?(t=!0,i=e[1]):(e=n.match(/ QQ[\s\/]([\d\.]*)/i))?(o=!0,i=e[1]):(e=n.match(/QQLiveBrowser\/([\d\.]*)/i))&&(a=!0,i=e[1]),{weixin:t,mqq:o,QQLiveBrowser:a,version:i}}(),this.os=function(){var e,n,t,o,a=navigator.userAgent,i=!1,s=!1,r="";return(e=a.match(/(Android);?[\s\/]+([\d.]+)?/))?(i=!0,r=e[2]):(n=a.match(/(iPhone\sOS)\s([\d_]+)/),t=a.match(/(iPad).*OS\s([\d_]+)/),o=a.match(/(iPod)(.*OS\s([\d_]+))?/),n?(r=n[2],n=!0,s=!0):t?(r=t[2],t=!0,s=!0):o&&(r=o[2],o=!0,s=!0)),{android:i,ios:s,iphone:n,ipad:t,ipod:o,version:r}}()}n.call(e,navigator.userAgent),e.__detect=n}(Zepto||window),FastClick.prototype.deviceIsAndroid=0<navigator.userAgent.indexOf("Android"),FastClick.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),FastClick.prototype.deviceIsIOS4=FastClick.prototype.deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),FastClick.prototype.deviceIsIOSWithBadTarget=FastClick.prototype.deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent),FastClick.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(this.deviceIsIOS&&"file"===e.type||e.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(e.className)},FastClick.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!this.deviceIsAndroid;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},FastClick.prototype.sendClick=function(e,n){var t,o;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),o=n.changedTouches[0],t=document.createEvent("MouseEvents"),t.initMouseEvent(this.determineEventType(e),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),t.forwardedTouchEvent=!0,e.dispatchEvent(t)},FastClick.prototype.determineEventType=function(e){return this.deviceIsAndroid&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(e){var n;this.deviceIsIOS&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type?(n=e.value.length,e.setSelectionRange(n,n)):e.focus()},FastClick.prototype.updateScrollParent=function(e){var n,t;if(n=e.fastClickScrollParent,!n||!n.contains(e)){t=e;do{if(t.scrollHeight>t.offsetHeight){n=t,e.fastClickScrollParent=t;break}t=t.parentElement}while(t)}n&&(n.fastClickLastScrollTop=n.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},FastClick.prototype.onTouchStart=function(e){var n,t,o;if(1<e.targetTouches.length)return!0;if(n=this.getTargetElementFromEventTarget(e.target),t=e.targetTouches[0],this.deviceIsIOS){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!this.deviceIsIOS4){if(t.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=t.identifier,this.updateScrollParent(n)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=n,this.touchStartX=t.pageX,this.touchStartY=t.pageY,200>e.timeStamp-this.lastClickTime&&e.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(e){var e=e.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n?!0:!1},FastClick.prototype.onTouchMove=function(e){return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(e){var n,t,o=this.targetElement;if(!this.trackingClick)return!0;if(200>e.timeStamp-this.lastClickTime)return this.cancelNextClick=!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,this.deviceIsIOSWithBadTarget&&(t=e.changedTouches[0],o=document.elementFromPoint(t.pageX-window.pageXOffset,t.pageY-window.pageYOffset)||o,o.fastClickScrollParent=this.targetElement.fastClickScrollParent),t=o.tagName.toLowerCase(),"label"===t){if(n=this.findControl(o)){if(this.focus(o),this.deviceIsAndroid)return!1;o=n}}else if(this.needsFocus(o))return 100<e.timeStamp-n||this.deviceIsIOS&&window.top!==window&&"input"===t?(this.targetElement=null,!1):(this.focus(o),this.deviceIsIOS4&&"select"===t||(this.targetElement=null,e.preventDefault()),!1);return this.deviceIsIOS&&!this.deviceIsIOS4&&(n=o.fastClickScrollParent)&&n.fastClickLastScrollTop!==n.scrollTop?!0:(this.needsClick(o)||(e.preventDefault(),this.sendClick(o,e)),!1)},FastClick.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(e){return this.targetElement&&!e.forwardedTouchEvent&&e.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,
e.stopPropagation(),e.preventDefault(),!1):!0},FastClick.prototype.onClick=function(e){return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail?!0:(e=this.onMouse(e),e||(this.targetElement=null),e)},FastClick.prototype.destroy=function(){var e=this.layer;this.deviceIsAndroid&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(e){var n,t;if("undefined"==typeof window.ontouchstart)return!0;if(t=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!FastClick.prototype.deviceIsAndroid)return!0;if((n=document.querySelector("meta[name=viewport]"))&&(-1!==n.content.indexOf("user-scalable=no")||t>31&&window.innerWidth<=window.screen.width))return!0}return"none"===e.style.msTouchAction?!0:!1},FastClick.attach=function(e){return new FastClick(e)},"undefined"!=typeof define&&define.amd?define(function(){return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.define&&define("lib/fastclick",[],function(){return FastClick}),window.FastClick=FastClick,function(e){var n={ready:function(e){window.WeixinJSBridge&&window.WeixinJSBridge.invoke?e():$(document).on("WeixinJSBridgeReady",e)},setData:function(e,n){if(window.nativeStorage)return window.nativeStorage.set(e,n);if(window.localStorage)try{window.localStorage[e]=n}catch(t){}},getData:function(e){return window.nativeStorage?window.nativeStorage.get(e):window.localStorage?window.localStorage[e]:void 0},getUrlParam:function(e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),t=window.location.search.substr(1).match(n);return null!=t?unescape(t[2]):null},filterParam:function(e){var n="";if(e)for(var t=0;t<e.length;t++)c=e.charAt(t),"<"!=c&&">"!=c&&(n+=c);return n},getQuery:function(e,n){var t=new RegExp("(^|&|\\?|#)"+n+"=([^&#]*)(&|$|#)","");if("undefined"!=typeof e){var o=e.match(t);return o?o[2]:""}},genReqKey:function(){var e,n,t=(new Date).getTime(),o=(9301*t+49297)%233280,a=0,i=0;for(o/=233280,e=Math.ceil(1e8*o),n=e+"",i;i<n.length;i++)a+=parseInt(n[i]);return a+="",n.length+n+a.length+a},delQueryValue:function(e,n){if("undefined"!=typeof e){if(!this.getQuery(e,n))return e;for(var t=(e.indexOf("?"),e.substr(0,e.indexOf("?"))),o=e.substr(e.indexOf("?")+1),a=o.split("&"),i=0,s=a.length;s>i;i++){var r=a[i].split("=")[0];if(r==n){a.splice(i,1);break}}return 0==a.length?t:t+"?"+a.join("&")}},loadJs:function(e){var n=this;e.id=e.id||"LoadedJs"+(new Date).getTime(),e.isRemove=e.isRemove||!0;var t=document.createElement("script");t.id=e.id,t.type="text/javascript",t.charset=e.charset||"gb2312";var o=function(){e.callback&&e.callback(),e.isRemove&&n.remove("#"+e.id)};t.readyState?t.onreadystatechange=function(){("loaded"==t.readyState||"complete"==t.readyState)&&(t.onreadystatechange=null,o())}:t.onload=function(){o()},t.src=n.setHttpPrefix(e.src);var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)},remove:function(){for(var e,n=0,t=arguments.length;t>n;n++){e=document.querySelector(arguments[n]);try{e.parentNode.removeChild(e)}catch(o){}}},setHttpPrefix:function(e){var n=this,t=n.isHttps(document.location.href)?e.replace(/^http:\/\//,"https://"):e.replace(/^https:\/\//,"http://");return t},isHttps:function(e){return e&&e.match(/^https:\/\//g)?!0:!1},addLoadEvent:function(e){var n=window.onload;window.onload="function"!=typeof window.onload?e:function(){n(),e()}},base64encode:function(e){var n,t,o,a,i,s,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(o=e.length,t=0,n="";o>t;){if(a=255&e.charCodeAt(t++),t==o){n+=r.charAt(a>>2),n+=r.charAt((3&a)<<4),n+="==";break}if(i=e.charCodeAt(t++),t==o){n+=r.charAt(a>>2),n+=r.charAt((3&a)<<4|(240&i)>>4),n+=r.charAt((15&i)<<2),n+="=";break}s=e.charCodeAt(t++),n+=r.charAt(a>>2),n+=r.charAt((3&a)<<4|(240&i)>>4),n+=r.charAt((15&i)<<2|(192&s)>>6),n+=r.charAt(63&s)}return n},base64decode:function(e){var n,t,o,a,i,s,r,l=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);for(s=e.length,i=0,r="";s>i;){do n=l[255&e.charCodeAt(i++)];while(s>i&&-1==n);if(-1==n)break;do t=l[255&e.charCodeAt(i++)];while(s>i&&-1==t);if(-1==t)break;r+=String.fromCharCode(n<<2|(48&t)>>4);do{if(o=255&e.charCodeAt(i++),61==o)return r;o=l[o]}while(s>i&&-1==o);if(-1==o)break;r+=String.fromCharCode((15&t)<<4|(60&o)>>2);do{if(a=255&e.charCodeAt(i++),61==a)return r;a=l[a]}while(s>i&&-1==a);if(-1==a)break;r+=String.fromCharCode((3&o)<<6|a)}return r}};e.baseTools=n}(window),function(e){window.addEventListener("load",function(){FastClick.attach(document.body)},!1);var n={openid:"",isHttps:!1,isInstallNews:void 0,isInstallLive:void 0,isInstallReading:void 0,isInstallStock:void 0,isInstallYYB:void 0,isIpad:!1,newsDownloadState:1,videoDownloadState:1,qnreadingDownloadState:1,stockDownloadState:1,newsVersion:0,qnreadingVersion:0,hotNewsArray:[],networkType:"",testABFlag:!1,hasJSBridgeReady:!1,bossArray:[],silenceOpenList:[],kuaibaoDesc:"<strong>"+kuaibaoName+"-腾讯兴趣阅读产品</strong>",hash33:function(e){var n=0,t=131,o=0,a=e.length;for(o;a>o;o++)n=n*t+e[o].charCodeAt(),n=2147483647&n;return n+""},testAB:function(e){var n=this,t=baseTools.getQuery(document.location.href,"isDebug"),o=n.hash33(e).substr(-2,2);n.testABFlag=t&&"1"==t||o<=testValue?!0:!1},reformTime:function(){var e,n,t=this,o=$(".time_need_reform");$.each(o,function(o,a){e=$(a).attr("time"),n=t.time2txt(e),$(a).html(n)})},time2txt:function(e,n){var t,o=new Date(1e3*e),a=n?new Date(1e3*n):new Date,i=new Date(60*Math.floor((a.getTime()+288e5)/864e5)*60*24*1e3),s=Math.floor((o.getTime()+288e5)/864e5),r=Math.floor(i/864e5),l=r-s,d=parseInt((a.getTime()-o.getTime())/1e3);switch(!0){case 0>d:t="刚刚";break;case 60>d:t=d+"秒前";break;case 3600>d:t=parseInt(d/60)+"分钟前";break;case 86400>d:t=1==l?"昨天"+o.getHours()+"点"+o.getMinutes()+"分":parseInt(d/3600)+"小时前";break;case 172800>d:t=2==l?"前天"+o.getHours()+"点"+o.getMinutes()+"分":"昨天"+o.getHours()+"点"+o.getMinutes()+"分";break;case 259200>d:t=2==l?"前天":o.getMonth()+1+"月"+o.getDate()+"日";break;default:t=o.getMonth()+1+"月"+o.getDate()+"日"}return t},transNum:function(e){switch(!0){case 0==e:re="";break;case 1e4>e:re=e;break;case 1e8>e:re=parseFloat(e/1e4).toFixed(1)+"万";break;default:re=parseFloat(e/1e8).toFixed(1)+"亿"}return re},reCheck:function(){var e=this;setTimeout(function(){var n=baseTools.getData("install_com.tencent.news"),t=baseTools.getData("install_com.tencent.reading"),o=baseTools.getData("install_com.tencent.qqlive");n&&"1"===n?(e.showModuleOpen(),e.newsDownloadState=1):e.showModuleDownload(),t&&"1"===t?(e.showModuleOpenReading(),e.qnreadingDownloadState=1):e.showModuleDownloadReading(),o&&"1"===o?(e.showModuleOpenVideo(),e.videoDownloadState=1):e.showModuleDownloadVideo()},0)},getScrollTop:function(){var e;return window.pageYOffset?e=window.pageYOffset:document.compatMode&&"BackCompat"!=document.compatMode?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e},bossAll:function(){var e=this;e.hasJSBridgeReady=!0,$.each(e.bossArray,function(e,n){var t=new Image;t.onload=function(){},t.src="http://btrace.qq.com/collect?"+n}),e.bossArray=[]},initStart:function(){var e=this;e.openid=baseTools.getQuery(document.location.href,"openid"),e.isHttps=baseTools.isHttps(document.location.href),e.testAB(e.openid),baseTools.ready(function(){e.init(),WeixinJSBridge.invoke("getNetworkType",{},function(n){"network_type:wifi"===n.err_msg&&(e.networkType="wifi")}),e.bossAll()}),e.reformTime(),e.reCheck(),e.addEvent(),e.newWechatStyle();var n=baseTools.getData(newsId+"_clickPosition");"undefined"!=typeof n&&0!=e.getScrollTop()&&(window.scrollTo(0,n),window.localStorage.removeItem(newsId+"_clickPosition")),e.sendBoss("pageView")},addEvent:function(){var e=this;$(".relNews ul li img").on("load",function(e){var n=e.target,t=$(n).width(),o=$(n).height();.8>o/t?($(n).css("height","100%"),$(n).css("margin-left","-"+(60*t/o-75)/2+"px")):($(n).css("width","100%"),$(n).css("margin-top","-"+(75*o/t-60)/2+"px"))}),$(document.body).on("touchstart",".relNews ul li, .currentHots ul li, #comment_banner_new",function(e){var n=e.currentTarget;$(n).css("background","#e7e7e7")}),$(document.body).on("touchmove",".relNews ul li, .currentHots ul li, #comment_banner_new",function(e){var n=e.currentTarget;$(n).css("background","")}),$(document.body).on("touchend",".relNews ul li, .currentHots ul li, #comment_banner_new",function(e){var n=e.currentTarget;$(n).css("background","")}),$(document.body).on("click",".relNews ul li, .currentHots ul li",function(n){var t=n.currentTarget;if(!$(t).hasClass("ad-item")){var o,a,i,s=$(t).parent(),r=$(t).attr("url");if($(s).hasClass("ulRelNews")&&(o=$(t).attr("newsid"),e.sendBoss("relNews",{newsid:o}),i="refer=wx_relatednews"),$(s).hasClass("ulCH")&&(o=$(t).attr("newsid"),a=$(t).attr("flag"),e.sendBoss("currentHots",{newsid:o,flag:a}),i="refer=wx_hotnews"),baseTools.setData($(t).attr("newsid"),"1"),baseTools.setData(newsId+"_clickPosition",e.getScrollTop()),r.indexOf("?")>-1){var l=r.substr(r.indexOf("?")+1);r+=l.length>0?"&"+i:i}else r+="?"+i;setTimeout(function(){document.location.href=r},100)}}),$(document.body).on("click",".commentScrollWrap .contentBox .commentPic img",function(n){var t=n.target;e.showCommentOrigImg(t)}),$(document.body).on("click",".commentScrollWrap .contentBox .moreBtn",function(e){var n=$(e.currentTarget),t=n.parent().find(".content");t.length&&$(t).hasClass("picOver")?$(t).removeClass("picOver"):t.length&&$(t).hasClass("over")&&$(t).removeClass("over"),$(n).css("display","none"),e.preventDefault()}),$(document.body).on("click","#ImageBox",function(e){var n=e.currentTarget;$(n).css("display","none")}),$(".relateVideo, .videoClips_imgArea, .newsVideo .mask, .atlas .atlas_imgArea, .mobvideonews .mobvideonews_imgArea").on("click",function(e){var n,t=$(e.currentTarget);n=t&&$(t).hasClass("qn_img")?t.parent().parent():t.parent();var o=n.find(".unified_downloader");downloader&&o.length&&$(o).hasClass("downloader_open")&&(e.preventDefault(),downloader.sendbossInit(o),window.location.href=o.attr("href"))})},processComment:function(){var e,n,t,o,a,i,s=$(".commentScrollWrap .contentBox");$.each(s,function(s,r){e=$(r).find(".content"),n=$(r).find(".moreBtn"),t=$(r).find(".commentPic"),t.length?(o=t.find("img"),o.length&&(a=o.data("width"),i=o.data("height"),.8>i/a?(o.css("height","100%"),o.css("margin-left","-"+(60*a/i-75)/2+"px")):(o.css("width","100%"),o.css("margin-top","-"+(75*i/a-60)/2+"px")),e.height()>48?(e.addClass("picOver"),n.length&&n.css("display","block")):n.length&&n.css("display","none"))):e.height()>72?(e.addClass("over"),n.length&&n.css("float","left")&&n.css("display","block")):n.length&&n.css("display","none")})},showCommentOrigImg:function(e){var t=$(e).attr("origUrl"),o=$("#ImageBox");o.length<=0&&(o=n.createImageBox()),o.css("display","block");var a=o.find("img");a.attr("src",t)},createImageBox:function(){var e=$('<div id="ImageBox" class="imgViewer"><img src="" class="origImg"/></div>');return $("body").prepend(e),e},showBottomDownloader:function(){var e=$(".alone_bottom_downloader");e.length&&e.css("display","block")},isHasLiReaded:function(){var e=$(".relNews ul li");$.each(e,function(e,n){"1"===qnreadingOpen&&$(n).attr("url","http://kuaibao.qq.com/s/"+$(n).attr("newsid")),baseTools.getData($(n).attr("newsid"))&&$(n).addClass("hasReadLi")});var n=$(".currentHots ul li");$.each(n,function(e,n){"1"===qnreadingOpen&&$(n).attr("url","http://kuaibao.qq.com/s/"+$(n).attr("newsid")+"?clickfrom=weixinhot"),baseTools.getData($(n).attr("newsid"))&&$(n).addClass("hasReadLi")})},ajaxHot:function(){var e=this,t=$(".currentHots .loading");if(t.length&&t.css("display","block"),"undefined"!=typeof newsId){var o={openid:e.openid,newsid:newsId,v:(new Date).getTime()};$.ajax({method:"get",url:currentHotUrl,data:o,dataType:"jsonp",success:function(e){e&&n.getCurrentHots(e)},error:function(){console.log("error")}})}return setTimeout(function(){t.length&&t.css("display","none")},3e3),!0},newWechatStyle:function(){var e=this;if("1"===appFlag&&e.testABFlag){var n,t,o=$("a.unified_downloader[type='qnreading']");$(o).each(function(e,o){return n=$(o).parent(),$(n).hasClass("atlas")||$(n).hasClass("mobvideonews")?(t=o,!1):void 0});var a,i;if($(t).length&&(a=$(t).attr("id")),a&&(i=moduleInfo[a].introText),i){var s=$(t).find(".downloader_text");s.length&&($(s).addClass("firstModule"),$(t).attr("firstModule","1"),$(s).html("打开"+e.kuaibaoDesc),$(t).append("<div class='downloader_intro'>"+i+"</div>"),$(t).css("height","58px"))}}var r=($(".atlas .unified_downloader"),$(".mobvideonews"),$(".videoClips"));$.each(r,function(e,n){$(n).css("display","none")});var l=$(".relNews");l.length&&l.css("display","block");var d,c=$(".relNews ul li");$.each(c,function(e,n){d=$(n).find("img"),d.length&&$(d).attr("src",$(d).attr("url"))});var u=$(".commentBox");if(u.length&&($(u).css("display","block"),e.processComment(),e.showCommentBannerNew()),"1"==closeHotNews)return e.showBottomDownloader(),void e.isHasLiReaded();var f,p,h,w,g,m,v=3*$(window).height(),y=$(window).height(),_=$(".currentHots"),k=$(".alone_bottom_downloader"),C="",b=$(".atlas"),S=$(".mobvideonews"),D=!1,x=!1,T=!1,I=!1,B=!1,A=!1,E=!1;baseTools.ready(function(){if(_.length&&(f=_[0].getBoundingClientRect().top,v>=f&&!T&&(T=e.ajaxHot()),y>=f&&(e.sendBoss("hotsexposure"),I=!0)),l.length&&(p=l[0].getBoundingClientRect().top,y>=p&&(e.sendBoss("relexposure"),B=!0)),u.length&&(h=u[0].getBoundingClientRect().top,y>=h&&(e.sendBoss("commentexposure"),A=!0)),k.length){var n=$(k).find(".unified_downloader");n.length&&(C=$(n[0]).attr("type")),w=k[0].getBoundingClientRect().top,y>=w&&(e.sendBoss("downloaderexposure",C),E=!0)}b.length&&(g=b[0].getBoundingClientRect().top,y>=g&&(e.sendBoss("atlasexposure"),x=!0)),S.length&&(m=S[0].getBoundingClientRect().top,y>=m&&(e.sendBoss("mobvideoexposure"),D=!0))}),window.onscroll=function(){e.timer&&clearTimeout(e.timer),e.timer=setTimeout(function(){_.length&&(f=_[0].getBoundingClientRect().top,v>=f&&!T&&(T=e.ajaxHot()),y>=f&&!I&&(e.sendBoss("hotsexposure"),I=!0)),l.length&&!B&&(p=l[0].getBoundingClientRect().top,y>=p&&(e.sendBoss("relexposure"),B=!0)),u.length&&!A&&(h=u[0].getBoundingClientRect().top,y>=h&&(e.sendBoss("commentexposure"),A=!0)),k.length&&!E&&(w=k[0].getBoundingClientRect().top,y>=w&&(e.sendBoss("downloaderexposure",C),E=!0)),b.length&&(g=b[0].getBoundingClientRect().top,y>=g&&!x&&(e.sendBoss("atlasexposure"),x=!0)),S.length&&(m=S[0].getBoundingClientRect().top,y>=m&&!D&&(e.sendBoss("mobvideoexposure"),D=!0))},100)}},getCurrentHots:function(e){var t=this,o=$(".currentHots");if(!(o.length<=0)){if(e&&"0"==e.ret){var a=e.info,i=[];i.push('<div class="currentHots_wrap">'),i.push('<p class="title">今日热点</p>'),i.push('<ul class="ulCH">'),$.each(a,function(e,n){return n?void("1"==n.articletype?(i.push('<li newsid="'+n.id+'" flag="'+n.flag+'" chlid="'+n.chlid+'" url="'+n.url+'">'),i.push('<p class="titleHot">'+n.title+"</p>"),i.push('<div class="multiPics">'),n.imgurl.length>=4?(i.push('<div class="imgWrap"><img src="'+n.imgurl[1]+'"/></div>'),i.push('<div class="imgWrap"><img src="'+n.imgurl[2]+'"/></div>'),i.push('<div class="imgWrap"><img src="'+n.imgurl[3]+'"/></div>')):i.push('<img src="'+n.imgurl[0]+'"/>'),i.push("</div>"),i.push('<span class="typeHot">'+n.pubtime+"</span>"),i.push('<span class="typeHot">'+n.src+"</span>"),i.push("</li>")):(i.push('<li class="singlePicLi" newsid="'+n.id+'" flag="'+n.flag+'" chlid="'+n.chlid+'" url="'+n.url+'">'),i.push('<div class="singlePic"><img src=" '+n.imgurl[0]+'"/></div>'),i.push('<div class="singlePicRight">'),i.push('<p class="titleHot"> '+n.title+"</p>"),i.push('<span class="typeHot">'+n.pubtime+"</span>"),i.push('<span class="typeHot">'+n.src+"</span>"),i.push("</div>"),i.push("</li>"))):(console.log("error, hotNews item null"),!0)}),i.push("</ul>"),i.push("</div>"),$(o).prepend(i.join("")),setTimeout(function(){"0"===qnreadingOpen&&t.addKBUrl()},0);var s=$(".currentHots_wrap");s.length&&$(s).css("display","block"),n.isHasLiReaded();var r=$(".currentHots .loading");r.length&&r.css("display","none")}else{var r=$(".currentHots .loading");r.length&&r.css("display","none")}t.hotNewsLoaded=!0,t.hotNewsLoadedTime=(new Date).getTime(),t.dealAdQueue(),"1"==window.hasAd?setTimeout(function(){t.showHotNews()},2e3):t.showHotNews()}},createParams:function(){var e=this;return"&reqkey="+baseTools.genReqKey()+"&mmuin="+baseTools.filterParam(baseTools.getUrlParam("mmuin"))+"&openid="+e.openid},init:function(){n.checkIsInstall()},checkIsInstall:function(){var e=this;!$.os.android&&WeixinJSBridge.env&&(e.isIpad=WeixinJSBridge.env("model").toLowerCase().indexOf("ipad")>-1?!0:!1),e.isIpad&&e.hasApp("com.tencent.news","qqnewshd://can_open_me_if_install_and_regeister_this_scheme",0),$.os.iphone&&(e.hasApp("com.tencent.news","qqnews://can_open_me_if_install_and_regeister_this_scheme",0),e.hasApp("com.tencent.qqlive","tenvideo2://can_open_me_if_install_and_regeister_this_scheme",0),e.hasApp("com.tencent.reading","qnreading://can_open_me_if_install_and_regeister_this_scheme",0),e.hasApp("com.tencent.portfolio","qqstock://",0)),$.os.android&&("1"==jumpYYBDownload&&e.hasApp("com.tencent.android.qqdownloader","tmast://can_open_me_if_install_and_regeister_this_scheme",370),e.hasApp("com.tencent.news","qqnews://can_open_me_if_install_and_regeister_this_scheme",220),e.hasApp("com.tencent.qqlive","tenvideo2://can_open_me_if_install_and_regeister_this_scheme",0),e.hasApp("com.tencent.reading","qnreading://can_open_me_if_install_and_regeister_this_scheme",0),e.hasApp("com.tencent.portfolio","qqtencentstockapp282://",0))},hasApp:function(e,t,o){var a=this;baseTools.ready(function(){WeixinJSBridge.invoke("getInstallState",{packageName:e,packageUrl:t},function(t){var i=t.err_msg,s=i.split("_"),r=s.length>0?Number(s[s.length-1]):0;i.indexOf("get_install_state:yes")>-1?o?("com.tencent.news"==e&&(a.newsVersion=r),"com.tencent.reading"==e&&(a.qnreadingVersion=r),r>=o?a.installCallback(e,!0):a.installCallback(e,!1)):("com.tencent.reading"==e&&(n.qnreadingVersion=r),a.installCallback(e,!0)):a.installCallback(e,!1)})})},installCallback:function(e,t){var o=this;switch(e){case"com.tencent.news":o.isInstallNews=t,o.isInstallNews?(o.showModuleOpen(),o.sendBoss("installNews"),o.silenceOpen(e)):(o.showModuleDownload(),o.sendBoss("uninstallNews"),n.silenceOpenList.push(!1)),$.os.android&&downloader.queryDownloadState("news");break;case"com.tencent.qqlive":o.isInstallLive=t,o.isInstallLive?(o.showModuleOpenVideo(),o.sendBoss("installVideo")):(o.showModuleDownloadVideo(),o.sendBoss("uninstallVideo")),$.os.android&&downloader.queryDownloadState("video");break;case"com.tencent.reading":o.isInstallReading=t,o.isInstallReading?(o.showModuleOpenReading(),o.sendBoss("hasinstallQnReading"),o.silenceOpen(e)):(o.showModuleDownloadReading(),o.sendBoss("uninstallQnReading"),n.silenceOpenList.push(!1)),$.os.android&&downloader.queryDownloadState("reading"),o.hasDoneModuleLoad=1;break;case"com.tencent.android.qqdownloader":o.isInstallYYB=t,jumpYYBDownload&&YYBOpen&&(o.isInstallYYB?(downloader.isJumpYYB=!0,o.sendBoss("installYYB_canJumpYYB")):downloader.isJumpYYB=!1,downloader.init());break;case"com.tencent.portfolio":o.isInstallStock=t,o.isInstallStock?o.showModuleOpenStock():o.showModuleDownloadStock(),$.os.android&&downloader.queryDownloadState("stock")}if(t?baseTools.setData("install_"+e,"1"):baseTools.setData("install_"+e,"0"),void 0!=o.isInstallNews&&void 0!=o.isInstallReading&&void 0!=o.isInstallLive||o.isIpad){if(o.moduleExposure(),"android"==mobileType&&"1"==YYBOpen&&"1"==jumpYYBDownload){if((void 0==o.isInstallNews||void 0==o.isInstallLive||void 0==o.isInstallStock||void 0==o.isInstallYYB||void 0==o.isInstallReading)&&!o.isIpad)return}else if((void 0==o.isInstallNews||void 0==o.isInstallLive||void 0==o.isInstallStock||void 0==o.isInstallReading)&&!o.isIpad)return;var a,i,s,r;"1"===appFlag?a="kuaibao":"2"===appFlag&&(a="news"),i=o.isInstallNews?1:0,s=o.isInstallReading?1:0,r=o.isInstallLive?1:0;var l={openid:o.openid,pluginType:"wechat",pagetype:a,isInstallNews:i,isInstallKuaibao:s,isInstallVideo:r,v:(new Date).getTime()};$.ajax({method:"get",url:setAppInstalledStateUrl,data:l,dataType:"json",success:function(e){},error:function(){console.log("error")}});var d={uin:o.openid,biz:"wx",pagetype:a,v:isAllKuaibaoUser+":"+i+","+s+","+r,s:(new Date).getTime()};$.ajax({method:"get",url:setAppInstalledNewUrl,data:d,dataType:"json",success:function(e){},error:function(){}})}},moduleExposure:function(){var e=this,n=$(".mobvideonews a.unified_downloader"),t=$(".atlas a.unified_downloader"),o=$(".commentBox a#comment_banner_new"),a=$(".alone_bottom_downloader a.unified_downloader"),i=$(".alone_bottom_downloader #video_banner_downloader"),s=$(".playerD a.unified_downloader");n&&n.length&&"none"!==$(n[0]).css("display")&&e.sendBoss("hasMobvideonews",$(n[0]).attr("type")),t&&t.length&&"none"!==$(t[0]).css("display")&&e.sendBoss("hasAtlas",$(t[0]).attr("type")),o&&o.length&&"none"!==$(o[0]).css("display")&&e.sendBoss("hasComment",$(o[0]).attr("type")),a&&a.length&&"none"!==$(a).css("display")&&e.sendBoss("hasBottomDownloader",$(a).attr("type")),i&&i.length&&"none"!==$(i).css("display")&&e.sendBoss("hasVideoDownloader",$(i).attr("type")),s&&s.length&&"none"!==$(s[0]).css("display")&&e.sendBoss("hasPlayerDownloader",$(s[0]).attr("type"))},showModuleDownload:function(){var e=this;if(1==e.newsDownloadState){e.newsDownloadState=1;var n,t,o,a=$(".unified_downloader");$.each(a,function(a,i){if(n=$(i).attr("id"),n&&moduleInfo&&moduleInfo[n]&&(t=moduleInfo[n],"news"===$(i).attr("type")||!$(i).attr("type"))){if(i.className="unified_downloader downloader_download",jumpYYBDownload&&YYBOpen&&downloader.isJumpYYB){var s=navigator.userAgent.toLowerCase(),r=s.match(/micromessenger\/([\d\.]+)/);r=r&&r[1]?r[1]:0,i.href="tmast://appdetails?pname=com.tencent.news&oplist=1;2&channelid="+newsChannel+"&via=ANDROIDWX.YYB.QNEWSPLUGIN&hostpname=com.tencent.mm&hostversioncode="+r}else i.href=downloadUrl+e.createParams();e.isIpad&&(i.href=ipadDownloadUrl+e.createParams()),o=$(i).find(".downloader_text"),o.length&&o.html(t.downloadText),$(i).css("visibility","visible")}})}},showModuleOpen:function(){var e=this;e.newsDownloadState=3;var n,t,o,a,i=e.openid?"openid="+e.openid:"",s=$(".unified_downloader");$.each(s,function(s,r){n=$(r).attr("id"),n&&moduleInfo&&moduleInfo[n]&&(t=moduleInfo[n],"news"!==$(r).attr("type")&&$(r).attr("type")||(r.className="unified_downloader downloader_open",a=e.isIpad?t.ipadOpenUrl:t.openUrl,r.href=i?a+"&extinfo="+encodeURIComponent(i):a,o=$(r).find(".downloader_text"),o.length&&o.html(t.openText),$(r).css("visibility","visible")))})},showModuleDownloadVideo:function(){var e=this;if(1==e.videoDownloadState){e.videoDownloadState=1;var n,t,o,a=$(".unified_downloader");$.each(a,function(a,i){n=$(i).attr("id"),n&&moduleInfo&&moduleInfo[n]&&(t=moduleInfo[n],"video"===$(i).attr("type")&&(i.className="unified_downloader downloader_download",i.href=t.downloadUrl+e.createParams(),o=$(i).find(".downloader_text"),o.length&&o.html(t.downloadText),$(i).css("visibility","visible")))})}},showModuleOpenVideo:function(){var e=this;e.videoDownloadState=3;var n,t,o,a=$(".unified_downloader"),i="V1_135_"+newsId;$.each(a,function(e,a){n=$(a).attr("id"),n&&moduleInfo&&moduleInfo[n]&&(t=moduleInfo[n],"video"===$(a).attr("type")&&(a.className="unified_downloader downloader_open",a.href=t.openUrl+(-1==t.openUrl.indexOf("?")?"?":"&")+"from="+i,o=$(a).find(".downloader_text"),o.length&&o.html(t.openText),$(a).css("visibility","visible")))})},showModuleDownloadReading:function(){var e=this;if(1==e.qnreadingDownloadState){e.qnreadingDownloadState=1;var n,t,o,a=$(".unified_downloader[type='qnreading']");$.each(a,function(a,i){n=$(i).attr("id"),n&&moduleInfo&&moduleInfo[n]&&(t=moduleInfo[n],i.className="unified_downloader downloader_download",i.href=t.downloadUrl+e.createParams(),o=$(i).find(".downloader_text"),o.length&&$(o).html($(o).hasClass("firstModule")?"下载"+e.kuaibaoDesc:t.downloadText),$(i).css("visibility","visible"))})}},showModuleOpenReading:function(){var e=this;e.qnreadingDownloadState=3;var t,o,a,i=$(".unified_downloader[type='qnreading']"),s=e.openid?"openid="+e.openid:"";$.each(i,function(i,r){t=$(r).attr("id"),t&&moduleInfo&&moduleInfo[t]&&(o=moduleInfo[t],r.className="unified_downloader downloader_open","comment_banner_new"==t&&"1"===qnreadingOpen&&("iphone"===mobileType||n.qnreadingVersion>=150)&&(o.openUrl=o.openUrl+(-1==o.openUrl.indexOf("?")?"?":"&")+"iscomment=1"),r.href=s?o.openUrl+"&extinfo="+encodeURIComponent(s):o.openUrl,a=$(r).find(".downloader_text"),a.length&&$(a).html($(a).hasClass("firstModule")?"打开"+e.kuaibaoDesc:o.openText),$(r).css("visibility","visible"))})},showModuleDownloadStock:function(){var e=this;if(1==e.stockDownloadState){e.stockDownloadState=1;var n=$(".stockapp");if(!(n.length<=0)){e.sendBoss("showStockAppDownloadBtn");var t=n.find(".unified_downloader");t.length&&("android"===mobileType?t.href=stockappInfo.downloadUrlAndroid+e.createParams():"iphone"===mobileType&&(t.href=stockappInfo.downloadUrlIphone+e.createParams()))}}},showModuleOpenStock:function(){var e=this;e.stockDownloadState=3;var n=$(".stockapp");if(!(n.length<=0)){e.sendBoss("showStockAppOpenBtn");var t=n.find(".stockapp_title");t.length&&t.html(stockappInfo.openText+stockappInfo.titleText);var o=n.find(".unified_downloader");o.length&&(o.className="unified_downloader downloader_open","android"===mobileType?o.href=stockappInfo.openUrlAndroid:"iphone"===mobileType&&(o.href=stockappInfo.openUrlIphone));var a=o.find(".btn_text");a.length&&a.html(stockappInfo.openText)}},showCommentBannerNew:function(){var e,n=$(".commentBox a.unified_downloader .comment_banner_new_num"),t=0;if(n.length)if(t=Number(n.html()),0===t){e="打开腾讯新闻，参与讨论","1"===qnreadingOpen&&(e="打开天天快报，参与讨论");var o=$(".commentBox a .downloader_text_comment");o.length&&o.html(e)&&$(o).addClass("downloader_text")}else 1e3>t||$(n).addClass(t>=1e3&&1e4>t?"less-comment":"more-comment")},sendBoss:function(e,n,t){var o=this,a=document.location.href,i=[];if(i.push("sIp="),i.push("iQQ="+(baseTools.getQuery(a,"mmuin")||o.openid)),i.push("sBiz="+encodeURIComponent("appnews.front.newsOpen")),i.push("sOp="+e),i.push("iSta=0"),i.push("iTy=1702"),i.push("iFlow="),i.push("sOsType="+mobileType),i.push("sNewsId="+newsId),i.push("sGroupId="+baseTools.getQuery(a,"groupid")),i.push("sMsgId="+baseTools.getQuery(a,"msgid")),i.push("sDt="+baseTools.getQuery(a,"dt")),i.push("sCv="+baseTools.getQuery(a,"cv")),i.push("sRefer="+baseTools.getQuery(a,"refer")),"1"===appFlag?i.push(n&&"qnreading"===n?"iReserved1=1":n&&"news"===n?"iReserved1=2":n&&"video"===n?"iReserved1=4":"iReserved1=1"):"2"===appFlag?i.push(n&&"qnreading"===n?"iReserved1=1":n&&"news"===n?"iReserved1=2":n&&"video"===n?"iReserved1=4":"iReserved1=2"):"3"===appFlag&&i.push(n&&"qnreading"===n?"iReserved1=1":n&&"news"===n?"iReserved1=2":n&&"video"===n?"iReserved1=4":"iReserved1=3"),i.push("1"==isAllKuaibaoUser?"iReserved2=1":"2"==isAllKuaibaoUser?"iReserved2=2":"iReserved2=0"),i.push(o.isHttps?"iReserved3=1":"iReserved3=0"),i.push("1"===appFlag&&o.testABFlag&&"firstModule"===t?"iReserved4=1":"iReserved4=0"),i.push(n&&n.newsid?"sReserved1="+n.newsid:"sReserved1="),n&&n.flag&&i.push("sReserved2="+n.flag),o.hasJSBridgeReady){var s=new Image;s.onload=function(){},s.src="http://btrace.qq.com/collect?"+i.join("&")}else o.bossArray.push(i.join("&"))},hotNewsReady:function(e){var n=this;n.hotNewsLoaded?e():n.hotNewsArray.push(e)},dealAdQueue:function(){var e=this;$.each(e.hotNewsArray,function(e,n){n()}),e.hotNewsArray=[]},setHotNewsAd:function(e){var n=this,t=[];if("undefined"!=typeof e){var o=$(".currentHots_wrap");if(!(o.length<=0)){var a=e.data,i=a.loc,s=a.hasAd;if(!s)return n.showHotNews(i),void(e.callback&&e.callback({ret:1,msg:"no ad",id:i,ready_time:n.hotNewsLoadedTime}));if("news_plugin_hot_stream"==a.display&&a.fodder&&a.fodder.length>0){var r=a.fodder[0];t.push('<li class="singlePicLi ad-item" id="'+i+'" newsid="'+a.oid+'" url="'+r.link_to+'">'),t.push('<div class="singlePic"><img src=" '+r.resource_url+'"/></div>'),t.push('<div class="singlePicRight">'),t.push('<p class="titleHot">'+r.text+"</p>"),t.push('<span class="typeHot">'+r.info+"</span>"),t.push('<span class="ad-item-tag">广告</span>'),t.push("</div>"),t.push("</li>")}var l=$(o.find(".ulCH")),d=l.find("li").eq(3);1==d.length?d.after(t.join("")):$(o.find(".ulCH")).append(t.join("")),n.showHotNews(),e.callback&&e.callback({ret:0,msg:"ok",id:i,ready_time:n.hotNewsLoadedTime})}}},showHotNews:function(e){var n=$(".currentHots_wrap");n.length&&e&&!n.find("#"+e)[0]&&$(n.find(".ulCH")).append('<li class="ad-item no-ad" id="'+e+'"></li>')},addKBUrl:function(){var e=this,n=window.kuaibaoHotCount;if(n&&!(n>10)){var t=$(".currentHots_wrap li"),o=$('.currentHots_wrap li[chlid="kb_video_news"]');if(t.length){o.length&&(n-=1,t=t.filter(function(e){return"kb_video_news"!==$(this).attr("chlid")?this:void 0}));for(var a=e.getRandom(1,t.length,n+1),i=0,s=0;n>s;s++){var r=t.eq(a[i]-1);(r.hasClass("ad-item")||r.hasClass("no-ad"))&&(i++,r=t.eq(a[i]-1));var l=r.attr("url");/view.inews.qq.com/.test(l)&&r.attr("url",l.replace(/view.inews.qq.com\/a/,"kuaibao.qq.com/s")),i++}}if(o.length)for(var a=e.getRandom(1,o.length,1),i=0,s=0;1>s;s++){var r=o.eq(a[i]-1);(r.hasClass("ad-item")||r.hasClass("no-ad"))&&(i++,r=o.eq(a[i]-1));var l=r.attr("url");/view.inews.qq.com/.test(l)&&r.attr("url",l.replace(/view.inews.qq.com\/a/,"kuaibao.qq.com/s")),i++}}},getRandom:function(e,n,t){t=t?t:1;var o=n-e+1,a=[];for(a.push(Math.floor(Math.random()*o+e));;){var i=Math.floor(Math.random()*o+e),s=a.length;if(-1==a.indexOf(i)&&t>s&&a.push(i),s=a.length,s>=t)break}return a},silenceOpen:function(e){if($.os.android){var t="",o=1e3;"com.tencent.news"==e?t="qqnews://article_9988":"com.tencent.reading"==e&&(t="qnreading://article_9988",o=2e3),Math.floor(100*Math.random())<=100||"1"==baseTools.getQuery(document.location.href,"isDebug")?(n.silenceOpenList.push(e),setTimeout(function(){document.location.href=t,n.bossSilence()},o)):n.silenceOpenList.push(!1)}},bossSilence:function(){if(2==n.silenceOpenList.length){var e=[];$.each(n.silenceOpenList,function(n,t){t&&("com.tencent.news"==t?e.push("silence.news"):"com.tencent.reading"==t&&e.push("silence.reading"))}),n.silenceOpenList=[],e=e.join("_"),e.length>0&&n.sendBoss(e)}}};n.initStart(),e.openAppController=n}(window),function(e){var n={isBeginHide:!1,init:function(){var e,n=this,t=$("#content > p, #content > div, #content > span, #content > h1, #content > h2, #content > h3, #content > a");$.each(t,function(t,o){e=$(o).html(),n.isBeginHide?$(o).addClass("showMoreHide"):$(o).hasClass("map")&&$(o).css("display","block"),/\$\$\$/i.test(e)&&($(o).html(e.replace(/<\!\-\-\$\$\$\-\->|\$\$\$/gi,"")),n.createMoreHTML($(o)),n.isBeginHide=!0)}),n.addEvent()},createMoreHTML:function(e){var n=this;if(n.isBeginHide)var t=$('<div id="showMore" class="showMoreAll showMoreHide" style="text-align:center;margin:0 -16px 30px"><span class="showMore" hideFocus="true">点击展开全文</span></div>');else var t=$('<div id="showMore" class="showMoreAll" style="text-align:center;margin:0 -16px 30px"><span class="showMore" hideFocus="true">点击展开全文</span></div>');$(e).length&&$(t).insertBefore($(e).next());

},addEvent:function(){var e=this;$(document.body).on("click","#showMore",e.clickHandle)},removeMoreHTML:function(){var e=$(".showMoreAll");$(e[0]).remove()},clickHandle:function(){openAppController.sendBoss("showMoreNews");var e=$("#content .showMoreHide");0!=e.length&&($.each(e,function(e,n){return $(n).removeClass("showMoreHide"),$(n).hasClass("map")&&$(n).css("display","block"),"showMore"===$(n).attr("id")?!1:void 0}),n.removeMoreHTML(),$.isFunction(window.createVideoPlayer)&&createVideoPlayer())}};n.init(),e.showMoreNews=n}(window),function(e){var n={init:function(){var e=n;e.bindShareWithApp(),e.bindShareWithTimeline(),e.addEvent()},addEvent:function(){var e=this;$(document.body).on("click","#content .preLoad img",e.clickHandler)},clickHandler:function(e){openAppController.sendBoss("imagePreview");var n=[],t=$("#content .preLoad img"),o=e.currentTarget;$(o).attr("preview-src")&&($.each(t,function(e,t){$(t).attr("preview-src")&&n.push($(t).attr("preview-src"))}),WeixinJSBridge.invoke("imagePreview",{current:$(o).attr("preview-src"),urls:n}))},bindShareWithApp:function(){WeixinJSBridge.on("menu:share:appmessage",function(e){var t=n.formatUrl(!1);WeixinJSBridge.invoke("sendAppMessage",{appid:"",img_url:contentModel.img_url,img_width:"65",img_height:"65",link:t,desc:contentModel.desc,title:contentModel.title},function(e){!e||"send_app_msg:confirm"!=e.err_msg&&"send_app_msg:ok"!=e.err_msg||(n.formatUrl(!0),openAppController.sendBoss("send_app_msg")),WeixinJSBridge.log(e.err_msg)})})},bindShareWithTimeline:function(){WeixinJSBridge.on("menu:share:timeline",function(e){var t=n.formatUrl(!1);WeixinJSBridge.invoke("shareTimeline",{img_url:contentModel.img_url,img_width:"65",img_height:"65",link:t,desc:"view.inews.qq.com",title:contentModel.title},function(e){e&&"share_timeline:ok"==e.err_msg&&(n.formatUrl(!0),openAppController.sendBoss("share_timeline")),WeixinJSBridge.log(e.err_msg)})})},formatUrl:function(e){var t=document.location.href,o=baseTools.getQuery(t,"w_f"),a=parseInt(baseTools.getQuery(t,"w_c"))>0?parseInt(baseTools.getQuery(t,"w_c")):0,i=baseTools.getQuery(t,"openid");if(o&&a?(o=baseTools.base64decode(decodeURIComponent(o)),o!=i?a++:a=a):(fromOpenId="",a=1),o==i||28!=o.length&&o||!e){var s="";s=window.newsId?"http://view.inews.qq.com/w/"+newsId:t.split("?")[0];var r=[];return r.push("w_f="+encodeURIComponent(baseTools.base64encode(i))),r.push("w_c="+a),r.push("isShare=1"),s=s+"?"+r.join("&")}return void n.boss(i,o,a)},boss:function(e,n,t){var o=(document.location.href,[]);o.push("sendID="+e),o.push("fromID="+n),o.push("sOp=share_news_w"),o.push("count="+t),o.push("sNewsId="+window.newsId),o.push("_dc="+Math.random());var a=new Image;a.onload=function(){},a.src="http://btrace.qq.com/kvcollect?BossId=3504&Pwd=1834242760&"+o.join("&")}};baseTools.ready(n.init),e.weChatBridgeReady=n}(window),function(e){var n={isPreventDefault:!0,isJumpYYB:void 0,hasInited:!1,newsDownloadIdKey:"",videoDownloadIdKey:"",qnreadingDownloadIdKey:"",stockDownloadIdKey:"",openid:"",init:function(){var e=this;if(e.openid=baseTools.getQuery(document.location.href,"openid"),e.newsDownloadIdKey="com.tencent.news_"+e.openid,e.videoDownloadIdKey="com.tencent.qqlive_"+e.openid,e.qnreadingDownloadIdKey="com.tencent.reading_"+e.openid,e.stockDownloadIdKey="com.tencent.portfolio_"+e.openid,$.os.android)if("1"==jumpYYBDownload){if(YYBOpen){if(e.hasInited||void 0==e.isJumpYYB)return;e.hasInited=!0}}else try{var n=[];if(n=_ua.match(/microMessenger\/(\d)\.([0-9.]+)/),n.length>1){var t=Number(n[1]);5>t&&(e.isPreventDefault=!1)}}catch(o){}else e.isPreventDefault=!1;e.addEvent(),baseTools.ready(function(){WeixinJSBridge.on("wxdownload:state_change",e.downloadStateChange)})},addEvent:function(){var e=this;$(document.body).on("click",".unified_downloader",e.moduleClick)},queryDownloadState:function(e){baseTools.ready(function(){"news"==e?downloadClick.queryDownloadState():"video"==e?downloadClickVideo.queryDownloadState():"weishi"==e?downloadClickWeishi.queryDownloadState():"reading"==e?downloadClickQnreading.queryDownloadState():"stock"==e&&downloadClickStock.queryDownloadState()})},downloadStateChange:function(e){var t=n;e&&e.state&&(e.download_id==baseTools.getData(t.newsDownloadIdKey)?downloadClick.downloadStateChange(e):e.download_id==baseTools.getData(t.videoDownloadIdKey)?downloadClickVideo.downloadStateChange(e):e.download_id==baseTools.getData(t.qnreadingDownloadIdKey)?downloadClickQnreading.downloadStateChange(e):e.download_id==baseTools.getData(t.stockDownloadIdKey)&&downloadClickStock.downloadStateChange(e))},moduleClick:function(e){var t=n,o=e.currentTarget;"android"===mobileType&&("video"==$(o).attr("type")?$(o).hasClass("downloader_downloading")?downloadClickVideo.stopDownload(o):$(o).hasClass("downloader_download")?downloadClickVideo.startDownload(o):$(o).hasClass("downloader_install")&&downloadClickVideo.installDownload(o):"qnreading"==$(o).attr("type")?$(o).hasClass("downloader_downloading")?downloadClickQnreading.stopDownload(o):$(o).hasClass("downloader_download")?downloadClickQnreading.startDownload(o):$(o).hasClass("downloader_install")&&downloadClickQnreading.installDownload(o):"stock"==$(o).attr("type")?$(o).hasClass("downloader_downloading")?downloadClickStock.stopDownload(o):$(o).hasClass("downloader_download")?downloadClickStock.startDownload(o):$(o).hasClass("downloader_install")&&downloadClickStock.installDownload(o):(t.isJumpYYB&&(t.isPreventDefault=!1),$(o).hasClass("downloader_downloading")?downloadClick.stopDownload(o):$(o).hasClass("downloader_download")?downloadClick.startDownload(o):$(o).hasClass("downloader_install")&&downloadClick.installDownload(o))),!$(o).hasClass("downloader_open")&&t.isPreventDefault&&e.preventDefault(),e.stopPropagation(),t.sendbossInit(o)},sendbossInit:function(e){var n=[],t=$(e).attr("type");$(e).hasClass("downloader_downloading")?n.push("downloading"):$(e).hasClass("downloader_install")?(n.push("install"),("news"===t||"qnreading"===t||"video"===t)&&openAppController.sendBoss("install_click",t)):$(e).hasClass("downloader_open")?(n.push("open"),("news"===t||"qnreading"===t||"video"===t)&&openAppController.sendBoss("open_click",t)):$(e).hasClass("downloader_download")&&(n.push("download"),("news"===t||"qnreading"===t||"video"===t)&&openAppController.sendBoss("download_click",t));var o=$(e).attr("id");if(-1!=o.indexOf("atlas"))n.push("atlas");else if(-1!=o.indexOf("comment"))n.push("comment");else if(-1!=o.indexOf("relatedNews"))n.push("relatedNews");else if(-1!=o.indexOf("videoClips"))n.push("videoClips");else if(-1!=o.indexOf("alone_bottom_downloader")){var a=$(e).parent().find(".relateVideo");n.push(a.length?"aloneDownloaderWithVideo":"aloneDownloader")}else n.push(-1!=o.indexOf("qnreading")?"qnreading":-1!=o.indexOf("mobvideonews")?"mobvideonews":-1!=o.indexOf("stock")?"stock":-1!=o.indexOf("channel")?"channel":-1!=o.indexOf("video_banner_downloader")?"video":-1!=o.indexOf("player_downloader")?"playerVideo":"others");n.push("click"),"news"===t||"qnreading"===t||"video"===t?"qnreading"===t&&"1"===$(e).attr("firstModule")?openAppController.sendBoss(n.join("_"),t,"firstModule"):openAppController.sendBoss(n.join("_"),t):openAppController.sendBoss(n.join("_"))}};n.init(),e.downloader=n}(window),function(e){var n={taskName:"TencentNews",queryDownloadState:function(){var e=baseTools.getData(downloader.newsDownloadIdKey);e&&WeixinJSBridge.invoke("queryDownloadTask",{download_id:e},function(e){n.downloadStateChange(e)})},downloadStateChange:function(e){e&&e.state&&(e.download_id&&e.download_id!=baseTools.getData(downloader.newsDownloadIdKey)||("download_succ"==e.state&&n.downloadComplete(),"default"==e.state,"downloading"==e.state&&n.showDownloading(),"download_fail"==e.state&&n.clearTask()))},startDownload:function(e){if("1"==jumpYYBDownload&&downloader.isJumpYYB)return void openAppController.sendBoss("JumpYYBStartDownLoad");var t=e.href;"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("addDownloadTask",{task_name:n.taskName,task_url:t,file_md5:downloadMd5},function(e){var t=e.err_msg;t.indexOf("add_download_task:ok")>-1?(baseTools.setData(downloader.newsDownloadIdKey,e.download_id),n.showDownloading(),openAppController.sendBoss("startDownLoad")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},showDefaultState:function(){var e,t,o,a,i=$(".unified_downloader");$.each(i,function(i,s){e=$(s).attr("id"),e&&moduleInfo&&moduleInfo[e]&&(t=moduleInfo[e],"news"===$(s).attr("type")&&(o=$(s).find(".downloader_text"),o.html(t.downloadText),a=$(s).find(".downloader_progress"),a.length&&a.css("display","none"),n.clearModuleStyle(s),$(s).addClass("downloader_download")))})},showDownloading:function(){openAppController.newsDownloadState=2;var e,t,o,a,i=$(".unified_downloader");$.each(i,function(i,s){e=$(s).attr("id"),e&&moduleInfo&&moduleInfo[e]&&(t=moduleInfo[e],"news"===$(s).attr("type")&&(o=$(s).find(".downloader_text"),o.html("正下载腾讯新闻客户端"),a=$(s).find(".downloader_progress"),a.length&&a.css("display","block"),n.clearModuleStyle(s),$(s).addClass("downloader_downloading")))})},clearTask:function(){if(window.localStorage&&localStorage.removeItem)try{window.localStorage.clear()}catch(e){window.localStorage.clear()}baseTools.setData(downloader.newsDownloadIdKey,"")},downloadComplete:function(){if(3!=openAppController.newsDownloadState){openAppController.newsDownloadState=2;var e,t,o,a,i=$(".unified_downloader");$.each(i,function(i,s){e=$(s).attr("id"),e&&moduleInfo&&moduleInfo[e]&&(t=moduleInfo[e],"news"===$(s).attr("type")&&(o=$(s).find(".downloader_text"),o.html("安装腾讯新闻客户端"),a=$(s).find(".downloader_progress"),a.length&&a.css("display","none"),n.clearModuleStyle(s),$(s).addClass("downloader_install")))}),openAppController.sendBoss("succDownLoad")}},stopDownload:function(e){var t=baseTools.getData(downloader.newsDownloadIdKey);t&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("cancelDownloadTask",{download_id:t,file_md5:downloadMd5},function(e){var t=e.err_msg;t.indexOf("cancel_download_task:ok")>-1?(n.showDefaultState(),openAppController.sendBoss("stopDownLoad")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},clearModuleStyle:function(e){$(e).removeClass("downloader_download"),$(e).removeClass("downloader_downloading"),$(e).removeClass("downloader_install")},installDownload:function(e){var n=baseTools.getData(downloader.newsDownloadIdKey);n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("installDownloadTask",{download_id:n,file_md5:downloadMd5},function(e){var n=e.err_msg;if(n.indexOf("install_download_task:ok")>-1){var t=setInterval(function(){clearInterval(t)},500);openAppController.sendBoss("installNewsApp")}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1}};e.downloadClick=n}(window),function(e){var n={taskName:"TencentVideo",queryDownloadState:function(){var e=baseTools.getData(downloader.videoDownloadIdKey);e&&WeixinJSBridge.invoke("queryDownloadTask",{download_id:e},function(e){n.downloadStateChange(e)})},downloadStateChange:function(e){e&&e.state&&(e.download_id&&e.download_id!=baseTools.getData(downloader.videoDownloadIdKey)||("download_succ"==e.state&&n.downloadComplete(),"default"==e.state,"downloading"==e.state&&n.showDownloading(),"download_fail"==e.state&&n.clearTask()),"function"==typeof transferDownloadState&&transferDownloadState(e))},startDownload:function(e){var t=e.href;"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("addDownloadTask",{task_name:n.taskName,task_url:t,file_md5:downloadVideoMD5},function(e){var t=e.err_msg;t.indexOf("add_download_task:ok")>-1?(baseTools.setData(downloader.videoDownloadIdKey,e.download_id),n.showDownloading(),openAppController.sendBoss("startDownLoadVideo")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},showDefaultState:function(){var e,t,o,a,i=$(".unified_downloader");$.each(i,function(i,s){e=$(s).attr("id"),e&&moduleInfo&&moduleInfo[e]&&(t=moduleInfo[e],"video"===$(s).attr("type")&&(o=$(s).find(".downloader_text"),o.html(t.downloadText),a=$(s).find(".downloader_progress"),a.length&&a.css("display","none"),n.clearModuleStyle(s),$(s).addClass("downloader_download")))})},showDownloading:function(){openAppController.videoDownloadState=2;var e,t,o,a,i=$(".unified_downloader");$.each(i,function(i,s){e=$(s).attr("id"),e&&moduleInfo&&moduleInfo[e]&&(t=moduleInfo[e],"video"===$(s).attr("type")&&(o=$(s).find(".downloader_text"),o.html("正下载腾讯视频客户端"),a=$(s).find(".downloader_progress"),a.length&&a.css("display","block"),n.clearModuleStyle(s),$(s).addClass("downloader_downloading")))})},clearTask:function(){if(window.localStorage&&localStorage.removeItem)try{window.localStorage.clear()}catch(e){window.localStorage.clear()}baseTools.setData(downloader.videoDownloadIdKey,"")},downloadComplete:function(){if(3!=openAppController.videoDownloadState){openAppController.videoDownloadState=2;var e,t,o,a,i=$(".unified_downloader");$.each(i,function(i,s){e=$(s).attr("id"),e&&moduleInfo&&moduleInfo[e]&&(t=moduleInfo[e],"video"===$(s).attr("type")&&(o=$(s).find(".downloader_text"),o.html("安装腾讯视频客户端"),a=$(s).find(".downloader_progress"),a.length&&a.css("display","none"),n.clearModuleStyle(s),$(s).addClass("downloader_install")))}),openAppController.sendBoss("succDownLoadVideo")}},stopDownload:function(e){var t=baseTools.getData(downloader.videoDownloadIdKey);t&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("cancelDownloadTask",{download_id:t,file_md5:downloadVideoMD5},function(e){var t=e.err_msg;t.indexOf("cancel_download_task:ok")>-1?(n.showDefaultState(),openAppController.sendBoss("stopDownLoadVideo")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},clearModuleStyle:function(e){$(e).removeClass("downloader_download"),$(e).removeClass("downloader_downloading"),$(e).removeClass("downloader_install")},installDownload:function(e){var n=baseTools.getData(downloader.videoDownloadIdKey);n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("installDownloadTask",{download_id:n,file_md5:downloadVideoMD5},function(e){var n=e.err_msg;if(n.indexOf("install_download_task:ok")>-1){var t=setInterval(function(){clearInterval(t)},500);openAppController.sendBoss("installNewsAppVideo")}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1}};e.downloadClickVideo=n}(window),function(e){var n={taskName:kuaibaoName,kuaibaoDesc:"<strong>"+kuaibaoName+"-腾讯兴趣阅读产品</strong>",queryDownloadState:function(){var e=baseTools.getData(downloader.qnreadingDownloadIdKey);e&&WeixinJSBridge.invoke("queryDownloadTask",{download_id:e},function(e){n.downloadStateChange(e)})},downloadStateChange:function(e){e&&e.state&&(e.download_id&&e.download_id!=baseTools.getData(downloader.qnreadingDownloadIdKey)||("download_succ"==e.state&&n.downloadComplete(),"default"==e.state,"downloading"==e.state&&n.showDownloading(),"download_fail"==e.state&&n.clearTask()))},startDownload:function(e){var t=e.href;"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("addDownloadTask",{task_name:n.taskName,task_url:t,file_md5:downloadQRMd5},function(e){var t=e.err_msg;t.indexOf("add_download_task:ok")>-1?(baseTools.setData(downloader.qnreadingDownloadIdKey,e.download_id),n.showDownloading(),openAppController.sendBoss("startDownLoadQnreading")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},showDefaultState:function(){var e,t,o,a,i=$(".unified_downloader");$.each(i,function(i,s){e=$(s).attr("id"),e&&moduleInfo&&moduleInfo[e]&&(t=moduleInfo[e],"qnreading"===$(s).attr("type")&&(o=$(s).find(".downloader_text"),o.length&&($(o).hasClass("firstModule")?$(o).html("下载"+n.kuaibaoDesc):o.html(t.downloadText)),a=$(s).find(".downloader_progress"),a.length&&a.css("display","none"),n.clearModuleStyle(s),$(s).addClass("downloader_download")))})},showDownloading:function(){openAppController.qnreadingDownloadState=2;var e,t,o,a,i=$(".unified_downloader");$.each(i,function(i,s){e=$(s).attr("id"),e&&moduleInfo&&moduleInfo[e]&&(t=moduleInfo[e],"qnreading"===$(s).attr("type")&&(o=$(s).find(".downloader_text"),o.length&&($(o).hasClass("firstModule")?$(o).html("正下载"+n.kuaibaoDesc):o.html("正下载"+kuaibaoName+"客户端")),a=$(s).find(".downloader_progress"),a.length&&a.css("display","block"),n.clearModuleStyle(s),$(s).addClass("downloader_downloading")))})},clearTask:function(){if(window.localStorage&&localStorage.removeItem)try{window.localStorage.clear()}catch(e){window.localStorage.clear()}baseTools.setData(downloader.qnreadingDownloadIdKey,"")},downloadComplete:function(){if(3!=openAppController.qnreadingDownloadState){openAppController.qnreadingDownloadState=2;var e,t,o,a,i=$(".unified_downloader");$.each(i,function(i,s){e=$(s).attr("id"),e&&moduleInfo&&moduleInfo[e]&&(t=moduleInfo[e],"qnreading"===$(s).attr("type")&&(o=$(s).find(".downloader_text"),o.length&&("comment_banner_new"==e||"1"===$(s).attr("only_btn")?o.html("安装"+kuaibaoName):$(o).hasClass("firstModule")?$(o).html("安装"+n.kuaibaoDesc):o.html("安装"+kuaibaoName+"，看更多有趣新闻")),a=$(s).find(".downloader_progress"),a.length&&a.css("display","none"),n.clearModuleStyle(s),$(s).addClass("downloader_install")))}),openAppController.sendBoss("succDownLoadQnreading")}},stopDownload:function(e){var t=baseTools.getData(downloader.qnreadingDownloadIdKey);t&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("cancelDownloadTask",{download_id:t,file_md5:downloadQRMd5},function(e){var t=e.err_msg;t.indexOf("cancel_download_task:ok")>-1?(n.showDefaultState(),openAppController.sendBoss("stopDownLoadQnreading")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},clearModuleStyle:function(e){$(e).removeClass("downloader_download"),$(e).removeClass("downloader_downloading"),$(e).removeClass("downloader_install")},installDownload:function(e){var n=baseTools.getData(downloader.qnreadingDownloadIdKey);n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("installDownloadTask",{download_id:n,file_md5:downloadQRMd5},function(e){var n=e.err_msg;if(n.indexOf("install_download_task:ok")>-1){var t=setInterval(function(){clearInterval(t)},500);openAppController.sendBoss("installQnreading")}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1}};e.downloadClickQnreading=n}(window),function(e){var n={taskName:"自选股",queryDownloadState:function(){var e=baseTools.getData(downloader.stockDownloadIdKey);e&&WeixinJSBridge.invoke("queryDownloadTask",{download_id:e},function(e){n.downloadStateChange(e)})},downloadStateChange:function(e){e&&e.state&&(e.download_id&&e.download_id!=baseTools.getData(downloader.stockDownloadIdKey)||("download_succ"==e.state&&n.downloadComplete(),"default"==e.state,"downloading"==e.state&&n.showDownloading(),"download_fail"==e.state&&n.clearTask()))},startDownload:function(e){var t=e.href;"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("addDownloadTask",{task_name:n.taskName,task_url:t,file_md5:stockappInfo.stockappMd5},function(e){var t=e.err_msg;t.indexOf("add_download_task:ok")>-1?(baseTools.setData(downloader.stockDownloadIdKey,e.download_id),n.showDownloading(),openAppController.sendBoss("startDownLoadStock")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},showDefaultState:function(){var e=$(".stockapp");if(!(e.length<=0)){var t=e.find(".stockapp_title");t.length&&t.html(stockappInfo.downloadText+stockappInfo.titleText);var o=e.find(".unified_downloader"),a=o.find(".btn_text");a.length&&a.html(stockappInfo.downloadText);var i=e.find(".btn_progress");i.length&&i.removeClass()&&i.addClass("btn_progress"),n.clearModuleStyle(o),$(o).removeClass()&&$(o).addClass("unified_downloader downloader_download")}},showDownloading:function(){openAppController.stockDownloadState=2;var e=$(".stockapp");if(!(e.length<=0)){var t=e.find(".unified_downloader"),o=t.find(".btn_text");o&&o.html(stockappInfo.downloadingText);var a=e.find(".btn_progress");a.length&&!$(a).hasClass("progress_downloading")&&(a.className="btn_progress progress_downloading"),n.clearModuleStyle(t),$(t).removeClass()&&$(t).addClass("unified_downloader downloader_downloading")}},clearTask:function(){if(window.localStorage&&localStorage.removeItem)try{window.localStorage.clear()}catch(e){window.localStorage.clear()}baseTools.setData(downloader.stockDownloadIdKey,"")},downloadComplete:function(){if(3!=openAppController.stockDownloadState){openAppController.stockDownloadState=2;var e=$(".stockapp");if(!(e.length<=0)){var t=e.find(".unified_downloader"),o=t.find(".btn_text");o.length&&o.html(stockappInfo.installText);var a=e.find(".btn_progress");a.length&&a.removeClass()&&a.addClass("btn_progress"),n.clearModuleStyle(t),$(t).removeClass()&&$(t).addClass("unified_downloader downloader_install"),openAppController.sendBoss("succDownLoadStock")}}},stopDownload:function(e){var t=baseTools.getData(downloader.stockDownloadIdKey);t&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("cancelDownloadTask",{download_id:t,file_md5:stockappInfo.stockappMd5},function(e){var t=e.err_msg;t.indexOf("cancel_download_task:ok")>-1?(n.showDefaultState(),openAppController.sendBoss("stopDownLoadStock")):downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1},clearModuleStyle:function(e){$(e).removeClass("downloader_download"),$(e).removeClass("downloader_downloading"),$(e).removeClass("downloader_install")},installDownload:function(e){var n=baseTools.getData(downloader.stockDownloadIdKey);n&&"undefined"!=typeof WeixinJSBridge&&WeixinJSBridge.invoke?WeixinJSBridge.invoke("installDownloadTask",{download_id:n,file_md5:stockappInfo.stockappMd5},function(e){var n=e.err_msg;if(n.indexOf("install_download_task:ok")>-1){var t=setInterval(function(){clearInterval(t)},500);openAppController.sendBoss("installNewsAppStock")}else downloader.isPreventDefault=!1}):downloader.isPreventDefault=!1}};e.downloadClickStock=n}(window),function(e){var n={isWinPhone:!1,init:function(e){var t=navigator.userAgent.toLowerCase();n.isWinPhone=t.match(/windows phone/)?!0:!1,n.isWinPhone&&n.hideElement(e)},hideElement:function(e){var n=$(e);$.each(n,function(e,n){n instanceof HTMLElement&&$(n).css("display","none")})}};n.init(".atlas,.relatedNews,.videoClips,.comment"),e.winPhoneController=n}(window);/*  |xGv00|1b85b419ea7627a1d1ce571ba64d7be6 */